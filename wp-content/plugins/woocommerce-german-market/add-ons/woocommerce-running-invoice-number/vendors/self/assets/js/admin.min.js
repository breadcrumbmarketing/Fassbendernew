jQuery(document).ready(function(n){n(".edit-refund-number").click(function(){var e=n(this).attr("data-refund-id");n("#edit-refund-number-text-field-"+e).show(),n("#edit-refund-number-button-"+e).show(),n("#refund-number-"+e).hide(),n(this).hide()}),n(".refund-number-save-button").click(function(){var e=n(this).attr("data-refund-id"),i=n("#edit-refund-number-text-field-"+e).val();n("#refund-number-"+e).html(i),n("#edit-refund-number-text-field-"+e).hide(),n("#edit-refund-number-a-"+e).show(),n("#refund-number-"+e).show(),n(this).hide();var r={action:"wp_wc_running_invoice_number_update_refund_number",security:wpwcrin_ajax.nonce,refund_id:e,new_refund_number:i};n.post(wpwcrin_ajax.url,r,function(n){})}),n(".wp-wc-invoice-pdf").click(function(e){if(n("#order_invoice_number").length&&""==n("#order_invoice_number").val().trim()&&(e.preventDefault(),n("#post_ID").length)){var i=n("#post_ID").val(),r={action:"wp_wc_running_invoice_number_ajax_backend_post",security:wpwcrin_ajax.nonce,order_id:i},c=n(this).attr("href");n.post(wpwcrin_ajax.url,r,function(e){var i=e.split("[[SEPARATOR]]");n("#order_invoice_number").length&&""==n("#order_invoice_number").val().trim()&&(n("#order_invoice_number").val(i[0]),n("#order_invoice_number").attr("readonly","readonly"),n("#wp_wc_invoice_remove_read_only").show(),n("#wp_wc_invoice_number_delete").show(),n(".wp_wc_invoice_remove_read_only_sep_delete").show(),n(".wp_wc_invoice_generate").hide()),n("#order_invoice_date").length&&""==n("#order_invoice_date").val().trim()&&n("#order_invoice_date").val(i[1]),window.location=c})}}),n(".wp_wc_invoice_generate").click(function(){var e=n(this).attr("name"),i={action:"wp_wc_running_invoice_number_ajax_backend_post",security:wpwcrin_ajax.nonce,order_id:e};n.post(wpwcrin_ajax.url,i,function(e){var i=e.split("[[SEPARATOR]]");n("#order_invoice_number").val(i[0]),n("#order_invoice_date").val(i[1]),n("#order_invoice_number").attr("readonly","readonly"),n("#wp_wc_invoice_remove_read_only").show(),n("#wp_wc_invoice_number_delete").show(),n(".wp_wc_invoice_remove_read_only_sep_delete").show(),n(".wp_wc_invoice_generate").hide()})}),n(".wp_wc_invoice_generate_orders_page").click(function(){n(this).hide();var e=n(this).attr("data-order-id"),i=n(this),r={action:"wp_wc_running_invoice_number_ajax_backend_shop_order",security:wpwcrin_ajax.nonce,order_id:e};n.post(wpwcrin_ajax.url,r,function(e){n(i).parent().append(e)})}),n(".wp_wc_invoice_remove_read_only").click(function(){n(this).css("visibility","hidden"),n("#order_invoice_number").removeAttr("readonly").focus(),n("#wp_wc_invoice_number_delete").hide(),n(".wp_wc_invoice_remove_read_only_sep_delete").hide()}),n(".wp_wc_invoice_number_delete").click(function(){var e=n(this).attr("data-order-id"),i={action:"wp_wc_running_invoice_number_delete",security:wpwcrin_ajax.nonce,order_id:e};n.post(wpwcrin_ajax.url,i,function(e){"SUCCESS"==e&&n("#order_invoice_number").val("")})}),n(".button.wc-action-button.invoice_pdf, .button.wc-action-button.e_invoice_xml").click(function(){var e=n(this).attr("href"),i={action:"wp_wc_running_invoice_number_show_after_invoice_pdf_clicked",security:wpwcrin_ajax.nonce,href:e};n.post(wpwcrin_ajax.url,i,function(e){var r=e.split("[[SEPARATOR]]");r[1]?n("#invoice_number_"+r[0]).length&&n("#invoice_number_"+r[0]).html(r[1]):n.post(wpwcrin_ajax.url,i,function(e){var i=e.split("[[SEPARATOR]]");i[1]&&n("#invoice_number_"+i[0]).length&&n("#invoice_number_"+i[0]).html(i[1])})})}),n("#wp_wc_running_invoice_number_prefix, #wp_wc_running_invoice_number_digits, #wp_wc_running_invoice_number_suffix, #wp_wc_running_invoice_number_next").keyup(function(){var e=n("#wp_wc_running_invoice_number_prefix").val(),i=parseInt(n("#wp_wc_running_invoice_number_digits").val()),r=n("#wp_wc_running_invoice_number_suffix").val(),c=parseInt(n("#wp_wc_running_invoice_number_next").val()),t=new Date,o=t.getDate();o=o<=9?"0"+o:o;var u=t.getMonth()+1;u=u<=9?"0"+u:u;var a=t.getFullYear(),d=a.toString().slice(-2);e=(e=(e=(e=e.replace("{{year}}",a)).replace("{{year-2}}",d)).replace("{{month}}",u)).replace("{{day}}",o),r=(r=(r=(r=r.replace("{{year}}",a)).replace("{{year-2}}",d)).replace("{{month}}",u)).replace("{{day}}",o),0==c&&(c=1);var v=isNaN(c)?1:c.toString().length,w=isNaN(i)?0:i,l=isNaN(c)?"1":c.toString();if(v<w)for(var p=w-v,m=1;m<=p;m++)l="0"+l;n("#wp_wc_running_invoice_number_digits").val(isNaN(i)?"":i),n("#wp_wc_running_invoice_number_next").val(isNaN(c)?"":c),n("#wp_wc_running_invoice_number_example").val(e+l+r)}),n("#wp_wc_running_invoice_number_digits, #wp_wc_running_invoice_number_next").change(function(){parseInt(n("#wp_wc_running_invoice_number_digits").val()),0==parseInt(n("#wp_wc_running_invoice_number_next").val())&&n("#wp_wc_running_invoice_number_next").val(1)}),n("#wp_wc_running_invoice_number_prefix_refund, #wp_wc_running_invoice_number_digits_refund, #wp_wc_running_invoice_number_suffix_refund, #wp_wc_running_invoice_number_next_refund").keyup(function(){var e=n("#wp_wc_running_invoice_number_prefix_refund").val(),i=parseInt(n("#wp_wc_running_invoice_number_digits_refund").val()),r=n("#wp_wc_running_invoice_number_suffix_refund").val(),c=parseInt(n("#wp_wc_running_invoice_number_next_refund").val()),t=new Date,o=t.getDate();o=o<=9?"0"+o:o;var u=t.getMonth()+1;u=u<=9?"0"+u:u;var a=t.getFullYear(),d=a.toString().slice(-2);e=(e=(e=(e=e.replace("{{year}}",a)).replace("{{year-2}}",d)).replace("{{month}}",u)).replace("{{day}}",o),r=(r=(r=(r=r.replace("{{year}}",a)).replace("{{year-2}}",d)).replace("{{month}}",u)).replace("{{day}}",o),0==c&&(c=1);var v=isNaN(c)?1:c.toString().length,w=isNaN(i)?0:i,l=isNaN(c)?"1":c.toString();if(v<w)for(var p=w-v,m=1;m<=p;m++)l="0"+l;n("#wp_wc_running_invoice_number_digits_refund").val(isNaN(i)?"":i),n("#wp_wc_running_invoice_number_next_refund").val(isNaN(c)?"":c),n("#wp_wc_running_invoice_number_example_refund").val(e+l+r)}),n("#wp_wc_running_invoice_number_digits_refund, #wp_wc_running_invoice_number_next_refund").change(function(){parseInt(n("#wp_wc_running_invoice_number_digits_refund").val()),0==parseInt(n("#wp_wc_running_invoice_number_next_refund").val())&&n("#wp_wc_running_invoice_number_next_refund").val(1)}),n(".refund_pdf, .e_invoice").click(function(){var e=n(this).attr("data-refund-id"),i="refund-number-"+e;""==jQuery("#"+i).html()&&setTimeout(function(){var r={action:"wp_wc_running_invoice_number_show_refund_number",security:wpwcrin_ajax.nonce,refund_id:e};n.post(wpwcrin_ajax.url,r,function(n){jQuery("#"+i).html(n)})},750)})});